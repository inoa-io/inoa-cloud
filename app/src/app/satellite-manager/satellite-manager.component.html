<ng-template #gatewayTableMini>
    <mat-card class="card-gateway-mini-table">
        <mat-card-header>
            <div
                mat-card-avatar
                style="background-image: url('assets/inoa/satellite-color.png'); background-size: cover"></div>
            <mat-card-title>Satellites</mat-card-title>
        </mat-card-header>

        <mat-card-content class="mat-card-content-gateway-table">
            <div class="gateway-table-sub-container-mini">
                <table
                    mat-table
                    [dataSource]="dataSourceGateways"
                    matSort
                    #sortRef="matSort"
                    #tableRef
                    class="gateway-table">
                    <!-- Gateway ID Column -->
                    <ng-container matColumnDef="gateway_id">
                        <th
                            mat-header-cell
                            *matHeaderCellDef>
                            Gateway ID
                        </th>
                        <td
                            mat-cell
                            *matCellDef="let element">
                            {{ element.gateway_id }}
                        </td>
                    </ng-container>

                    <tr
                        mat-header-row
                        *matHeaderRowDef="displayedColumnsGatewayTableMini; sticky: true"></tr>
                    <tr
                        mat-row
                        *matRowDef="let dataRow; columns: displayedColumnsGatewayTableMini"
                        (click)="gatewayRowClicked(dataRow)"
                        class="element-row"
                        [ngClass]="{ 'element-row-selected': isRowSelected(dataRow) }"></tr>
                </table>
            </div>
        </mat-card-content>
    </mat-card>
</ng-template>

<mat-tab-group
    class="gateway-table-tab-group"
    [(selectedIndex)]="selectedTabIndex"
    headerPosition="below"
    color="primary"
    animationDuration="0ms"
    backgroundColor="primary">
    <mat-tab label="Satellite Table">
        <div
            class="gateway-table-container"
            tabindex="0">
            <mat-card class="card-gateway-table">
                <!-- header -->
                <mat-card-header>
                    <div
                        mat-card-avatar
                        style="background-image: url('assets/inoa/satellite-color.png'); background-size: cover"></div>
                    <mat-card-title>Satellite Management</mat-card-title>
                    <mat-card-subtitle>Check and maintain your INOA Satellites.</mat-card-subtitle>
                </mat-card-header>

                <mat-card-content class="mat-card-content-gateway-table">
                    <div class="gateway-table-sub-container">
                        <!-- satellite table -->
                        <table
                            mat-table
                            [dataSource]="dataSourceGateways"
                            matSort
                            #sortRef="matSort"
                            #tableRef
                            class="gateway-table">
                            <!-- Selection Column -->
                            <ng-container matColumnDef="select">
                                <th
                                    mat-header-cell
                                    *matHeaderCellDef>
                                    <mat-checkbox
                                        (change)="$event ? toggleAllRows() : null"
                                        [checked]="selectionGateways.hasValue() && isAllSelected()"
                                        [indeterminate]="selectionGateways.hasValue() && !isAllSelected()">
                                    </mat-checkbox>
                                </th>
                                <td
                                    mat-cell
                                    *matCellDef="let row">
                                    <mat-checkbox
                                        (click)="$event.stopPropagation()"
                                        (change)="$event ? selectionGateways.toggle(row) : null"
                                        [checked]="selectionGateways.isSelected(row)">
                                    </mat-checkbox>
                                </td>
                            </ng-container>

                            <!-- Gateway ID Column -->
                            <ng-container matColumnDef="gateway_id">
                                <th
                                    mat-header-cell
                                    *matHeaderCellDef
                                    mat-sort-header>
                                    Gateway ID
                                </th>
                                <td
                                    mat-cell
                                    *matCellDef="let element">
                                    {{ element.gateway_id }}
                                </td>
                            </ng-container>

                            <!-- Gateway Name Column -->
                            <ng-container matColumnDef="name">
                                <th
                                    mat-header-cell
                                    *matHeaderCellDef
                                    mat-sort-header>
                                    Name
                                </th>
                                <td
                                    mat-cell
                                    *matCellDef="let element">
                                    {{ element.name }}
                                </td>
                            </ng-container>

                            <!-- Enabled Column -->
                            <ng-container matColumnDef="enabled">
                                <th
                                    mat-header-cell
                                    *matHeaderCellDef>
                                    Enabled
                                </th>
                                <td
                                    mat-cell
                                    *matCellDef="let element"
                                    class="mat-cell-center">
                                    <button
                                        mat-icon-button
                                        [matTooltip]="element.enabled ? 'Satellite is enabled' : 'Satellite is disabled'"
                                        matTooltipPosition="above"
                                        (click)="toggleEnabledClick(element, $event, !element.enabled)">
                                        <mat-icon
                                            *ngIf="element.enabled"
                                            fontIcon="toggle_on"></mat-icon>
                                        <mat-icon
                                            *ngIf="!element.enabled"
                                            fontIcon="toggle_off"></mat-icon>
                                    </button>
                                </td>
                            </ng-container>

                            <!-- Connection Status Column -->
                            <ng-container matColumnDef="status">
                                <th
                                    mat-header-cell
                                    *matHeaderCellDef>
                                    Connected
                                </th>
                                <td
                                    mat-cell
                                    *matCellDef="let element"
                                    class="mat-cell-center">
                                    <mat-icon
                                        *ngIf="element.status.mqtt.connected"
                                        fontIcon="link"
                                        style="color: green"></mat-icon>
                                    <mat-icon
                                        *ngIf="!element.status.mqtt.connected"
                                        fontIcon="link_off"
                                        color="warn"></mat-icon>
                                </td>
                            </ng-container>

                            <!-- Actions Column -->
                            <ng-container matColumnDef="actions">
                                <th
                                    mat-header-cell
                                    *matHeaderCellDef
                                    style="text-align: center"></th>
                                <td
                                    mat-cell
                                    *matCellDef="let element; let rowIndex = index"
                                    style="width: 50px">
                                    <div style="display: flex">
                                        <button
                                            mat-icon-button
                                            matTooltip="Rename satellite"
                                            matTooltipPosition="above"
                                            (click)="renameSatelliteClick(element, $event)">
                                            <mat-icon>edit</mat-icon>
                                        </button>

                                        <button
                                            mat-icon-button
                                            matTooltip="Go to satellite rpc terminal"
                                            matTooltipPosition="above"
                                            (click)="openConsoleClick(rowIndex, $event)"
                                            [disabled]="!element.enabled || !element.status.mqtt.connected">
                                            <mat-icon>terminal</mat-icon>
                                        </button>

                                        <button
                                            mat-icon-button
                                            matTooltip="Wink satellite LED"
                                            matTooltipPosition="above"
                                            (click)="winkClick(element, $event)"
                                            [disabled]="!element.enabled || !element.status.mqtt.connected">
                                            <mat-icon>remove_red_eye</mat-icon>
                                        </button>

                                        <button
                                            mat-icon-button
                                            matTooltip="Restart the satellite"
                                            matTooltipPosition="above"
                                            (click)="restartClick(element, $event)"
                                            [disabled]="!element.enabled || !element.status.mqtt.connected">
                                            <mat-icon>restart_alt</mat-icon>
                                        </button>
                                    </div>
                                </td>
                            </ng-container>

                            <tr
                                mat-header-row
                                *matHeaderRowDef="displayedColumnsGatewayTable; sticky: true"></tr>
                            <tr
                                mat-row
                                *matRowDef="let dataRow; columns: displayedColumnsGatewayTable"
                                (click)="gatewayRowClicked(dataRow)"
                                class="element-row"
                                [ngClass]="{ 'element-row-selected': isRowSelected(dataRow) }"></tr>
                        </table>
                    </div>

                    <div class="gateway-table-bottom-bar">
                        <!-- auto refresh select -->
                        <div class="gateway-table-auto-refresh-select">
                            Auto refresh interval:
                            <mat-form-field
                                class="custom-height-select"
                                appearance="outline">
                                <mat-select
                                    [(ngModel)]="autoRefreshInterval"
                                    (ngModelChange)="onIntervalChange()">
                                    <mat-option
                                        *ngFor="let interval of autoRefreshIntervals"
                                        [value]="interval">
                                        {{ interval }}
                                    </mat-option>
                                </mat-select>
                            </mat-form-field>
                        </div>

                        <!-- page indicator Bottom -->
                        <mat-paginator
                            #paginatorRef
                            [length]="20"
                            [pageSizeOptions]="intercomService.pageSizes"
                            [pageSize]="intercomService.pageSize"
                            [pageIndex]="intercomService.pageNumber"
                            showFirstLastButtons
                            class="gateway-table-paginator">
                        </mat-paginator>
                    </div>
                </mat-card-content>
            </mat-card>
        </div>
    </mat-tab>

    <mat-tab
        label="Satellite Details"
        *ngIf="intercomService.selectedGateway">
        <div class="gateway-detail-container">
            <ng-container *ngTemplateOutlet="gatewayTableMini"></ng-container>

            <div class="gateway-detail-sub-container">
                <div class="gateway-detail-sub-sub-container">
                    <!-- database things card -->
                    <mat-card class="card-gateway-things">
                        <mat-card-header>
                            <div
                                mat-card-avatar
                                style="background-image: url('assets/inoa/satellite-color.png'); background-size: cover"></div>
                            <mat-card-title>Database things connected to</mat-card-title>
                            <mat-card-subtitle>
                                <div class="gateway-status-container">
                                    <span>{{ intercomService.selectedGateway.gateway_id }} ({{ intercomService.selectedGateway.name }})</span>

                                    <!-- enabled icon -->
                                    <mat-icon
                                        *ngIf="intercomService.selectedGateway.enabled"
                                        class="status-icon-scaled"
                                        fontIcon="toggle_on"></mat-icon>

                                    <!-- disabled icon -->
                                    <mat-icon
                                        *ngIf="!intercomService.selectedGateway.enabled"
                                        class="status-icon-scaled"
                                        fontIcon="toggle_off"></mat-icon>

                                    <!-- mqtt connected icon -->
                                    <mat-icon
                                        *ngIf="intercomService.selectedGateway.status?.mqtt?.connected"
                                        class="status-icon-scaled"
                                        fontIcon="link"
                                        style="color: green"></mat-icon>

                                    <!-- mqtt not connected icon -->
                                    <mat-icon
                                        *ngIf="!intercomService.selectedGateway.status?.mqtt?.connected"
                                        class="status-icon-scaled"
                                        fontIcon="link_off"
                                        color="warn"></mat-icon>
                                </div>
                            </mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content class="mat-card-content-gateway-things">
                            <div
                                class="things-table"
                                tabindex="0">
                                <!-- things table -->
                                <table
                                    mat-table
                                    class="satellite-things-table"
                                    [dataSource]="dataSourceThingsDatabase"
                                    multiTemplateDataRows>
                                    <!-- ID Column -->
                                    <ng-container matColumnDef="id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Thing ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.id }}
                                        </td>
                                    </ng-container>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="name">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Name
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.name }}
                                        </td>
                                    </ng-container>

                                    <!-- Thing Category -->
                                    <ng-container matColumnDef="category">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Category
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ utilityService.getThingCategory(element.thing_type_id).title }}
                                        </td>
                                    </ng-container>

                                    <!-- Gateway ID Column -->
                                    <ng-container matColumnDef="gateway_id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Gateway ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.gateway_id }}
                                        </td>
                                    </ng-container>

                                    <!-- Enabled Column -->
                                    <ng-container matColumnDef="enabled">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Enabled
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element"
                                            class="mat-cell-center">
                                            <button
                                                mat-icon-button
                                                [matTooltip]="element.config.enabled ? 'Thing is enabled' : 'Thing is disabled'"
                                                matTooltipPosition="above">
                                                <mat-icon
                                                    *ngIf="element.config.enabled"
                                                    fontIcon="toggle_on"></mat-icon>
                                                <mat-icon
                                                    *ngIf="!element.config.enabled"
                                                    fontIcon="toggle_off"></mat-icon>
                                            </button>
                                        </td>
                                    </ng-container>

                                    <!-- Match Column -->
                                    <ng-container matColumnDef="match">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Match
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element"
                                            class="mat-cell-center">
                                            <ng-container *ngIf="findMatchOnSatelliteByAllProperties(element); else noMatch">
                                                <mat-icon
                                                    fontIcon="check"
                                                    style="color: green"></mat-icon>
                                            </ng-container>
                                            <ng-template #noMatch>
                                                <mat-icon
                                                    fontIcon="clear"
                                                    style="color: red"></mat-icon>
                                            </ng-template>
                                        </td>
                                    </ng-container>

                                    <!-- Thing ID Column -->
                                    <ng-container matColumnDef="thing_config_id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Config ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.config.id }}
                                        </td>
                                    </ng-container>

                                    <!-- Thing Type ID Column -->
                                    <ng-container matColumnDef="thing_type_id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Thing Type ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.thing_type_id }}
                                        </td>
                                    </ng-container>

                                    <!-- Actions Column -->
                                    <ng-container matColumnDef="actions">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef
                                            style="text-align: center"></th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element; let rowIndex = index"
                                            style="width: 50px">
                                            <div style="display: flex">
                                                <button
                                                    mat-icon-button
                                                    matTooltip="Remove Thing from Database"
                                                    matTooltipPosition="above"
                                                    (click)="removeThingDatabaseClick(element, $event)">
                                                    <mat-icon>delete</mat-icon>
                                                </button>
                                            </div>
                                        </td>
                                    </ng-container>

                                    <!-- Sync Column -->
                                    <ng-container matColumnDef="sync">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef
                                            style="text-align: center">
                                            <button
                                                mat-icon-button
                                                matTooltip="Sync All to Satellite"
                                                matTooltipPosition="above"
                                                (click)="syncAllThingsDatabaseClick($event)">
                                                <mat-icon>keyboard_double_arrow_right</mat-icon>
                                            </button>
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element; let rowIndex = index">
                                            <button
                                                mat-icon-button
                                                matTooltip="Sync to Satellite"
                                                matTooltipPosition="above"
                                                (click)="syncThingDatabaseClick(element, $event, true)">
                                                <mat-icon>keyboard_arrow_right</mat-icon>
                                            </button>
                                        </td>
                                    </ng-container>

                                    <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
                                    <ng-container matColumnDef="expanded_detail">
                                        <td
                                            mat-cell
                                            *matCellDef="let element"
                                            [attr.colspan]="3">
                                            <div
                                                class="thing-config-element-detail"
                                                [@detailExpand]="element === expandedElementDatabase ? 'expanded' : 'collapsed'">
                                                <!-- show config if there is any -->
                                                <div *ngIf="element.config">
                                                    <p>Config:</p>
                                                    <pre><code class="config-code">{{ element.config | json }}</code></pre>
                                                </div>

                                                <!-- show no config if there is none yet -->
                                                <div *ngIf="!element.config">
                                                    <p>No config</p>
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>

                                    <tr
                                        mat-header-row
                                        *matHeaderRowDef="displayedColumnsThingsTableDatabase; sticky: true"></tr>
                                    <tr
                                        mat-row
                                        *matRowDef="let row; columns: displayedColumnsThingsTableDatabase"
                                        class="thing-config-row"
                                        [class.thing-config-expanded-row]="expandedElementDatabase === row"
                                        (click)="cellClickThings(row); expandedElementDatabase = expandedElementDatabase === row ? null : row"
                                        class="element-row"></tr>
                                    <tr
                                        mat-row
                                        *matRowDef="let row; columns: ['expanded_detail']"
                                        class="thing-config-detail-row"></tr>
                                </table>
                            </div>
                        </mat-card-content>
                    </mat-card>

                    <!-- satellite things card -->
                    <mat-card class="card-gateway-things">
                        <mat-card-header>
                            <div
                                mat-card-avatar
                                style="background-image: url('assets/inoa/satellite-color.png'); background-size: cover"></div>
                            <mat-card-title>Satellite things connected to</mat-card-title>
                            <mat-card-subtitle>{{ intercomService.selectedGateway.gateway_id }}</mat-card-subtitle>
                        </mat-card-header>

                        <mat-card-content class="mat-card-content-gateway-things">
                            <div
                                class="things-table"
                                tabindex="0">
                                <!-- things table -->
                                <table
                                    mat-table
                                    class="satellite-things-table"
                                    [dataSource]="dataSourceThingsSatellite"
                                    multiTemplateDataRows>
                                    <!-- Sync Column -->
                                    <ng-container matColumnDef="sync">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef
                                            style="text-align: center">
                                            <button
                                                mat-icon-button
                                                matTooltip="Sync All to Database"
                                                matTooltipPosition="above"
                                                (click)="syncAllThingsSatelliteClick($event)">
                                                <mat-icon>keyboard_double_arrow_left</mat-icon>
                                            </button>
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element; let rowIndex = index">
                                            <button
                                                mat-icon-button
                                                matTooltip="Sync to Database"
                                                matTooltipPosition="above"
                                                (click)="syncThingSatelliteClick(element, $event, true)">
                                                <mat-icon>keyboard_arrow_left</mat-icon>
                                            </button>
                                        </td>
                                    </ng-container>

                                    <!-- ID Column -->
                                    <ng-container matColumnDef="id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Thing ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.id }}
                                        </td>
                                    </ng-container>

                                    <!-- Name Column -->
                                    <ng-container matColumnDef="name">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Name
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.name }}
                                        </td>
                                    </ng-container>

                                    <!-- Thing Category -->
                                    <ng-container matColumnDef="category">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Category
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ utilityService.getThingCategory(element.thing_type_id).title }}
                                        </td>
                                    </ng-container>

                                    <!-- Gateway ID Column -->
                                    <ng-container matColumnDef="gateway_id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Gateway ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.gateway_id }}
                                        </td>
                                    </ng-container>

                                    <!-- Enabled Column -->
                                    <ng-container matColumnDef="enabled">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Enabled
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element"
                                            class="mat-cell-center">
                                            <button
                                                mat-icon-button
                                                [matTooltip]="element.enabled ? 'Thing is enabled' : 'Thing is disabled'"
                                                matTooltipPosition="above">
                                                <mat-icon
                                                    *ngIf="element.enabled"
                                                    fontIcon="toggle_on"></mat-icon>
                                                <mat-icon
                                                    *ngIf="!element.enabled"
                                                    fontIcon="toggle_off"></mat-icon>
                                            </button>
                                        </td>
                                    </ng-container>

                                    <!-- Match Column -->
                                    <ng-container matColumnDef="match">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Match
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element"
                                            class="mat-cell-center">
                                            <ng-container *ngIf="findMatchInDatabaseByAllProperties(element); else noMatch">
                                                <mat-icon
                                                    fontIcon="check"
                                                    style="color: green"></mat-icon>
                                            </ng-container>
                                            <ng-template #noMatch>
                                                <mat-icon
                                                    fontIcon="clear"
                                                    style="color: red"></mat-icon>
                                            </ng-template>
                                        </td>
                                    </ng-container>

                                    <!-- Thing ID Column -->
                                    <ng-container matColumnDef="thing_config_id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Config ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.id }}
                                        </td>
                                    </ng-container>

                                    <!-- Thing Type ID Column -->
                                    <ng-container matColumnDef="thing_type_id">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef>
                                            Thing Type ID
                                        </th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element">
                                            {{ element.thing_type_id }}
                                        </td>
                                    </ng-container>

                                    <!-- Actions Column -->
                                    <ng-container matColumnDef="actions">
                                        <th
                                            mat-header-cell
                                            *matHeaderCellDef
                                            style="text-align: center"></th>
                                        <td
                                            mat-cell
                                            *matCellDef="let element; let rowIndex = index"
                                            style="width: 50px">
                                            <div style="display: flex">
                                                <button
                                                    mat-icon-button
                                                    matTooltip="Remove Thing from Satellite"
                                                    matTooltipPosition="above"
                                                    (click)="removeThingSatelliteClick(element, $event)">
                                                    <mat-icon>delete</mat-icon>
                                                </button>
                                            </div>
                                        </td>
                                    </ng-container>

                                    <!-- Expanded Content Column - The detail row is made up of this one column that spans across all columns -->
                                    <ng-container matColumnDef="expanded_detail">
                                        <td
                                            mat-cell
                                            *matCellDef="let element"
                                            [attr.colspan]="3">
                                            <div
                                                class="thing-config-element-detail"
                                                [@detailExpand]="element === expandedElementSatellite ? 'expanded' : 'collapsed'">
                                                <!-- show config if there is any -->
                                                <div *ngIf="element">
                                                    <p>Config:</p>
                                                    <pre><code class="config-code">{{ element | json }}</code></pre>
                                                </div>

                                                <!-- show no config if there is none yet -->
                                                <div *ngIf="!element">
                                                    <p>No config</p>
                                                </div>
                                            </div>
                                        </td>
                                    </ng-container>

                                    <tr
                                        mat-header-row
                                        *matHeaderRowDef="displayedColumnsThingsTableSatellite; sticky: true"></tr>
                                    <tr
                                        mat-row
                                        *matRowDef="let row; columns: displayedColumnsThingsTableSatellite"
                                        class="thing-config-row"
                                        [class.thing-config-expanded-row]="expandedElementSatellite === row"
                                        (click)="cellClickThings(row); expandedElementSatellite = expandedElementSatellite === row ? null : row"
                                        class="element-row"></tr>
                                    <tr
                                        mat-row
                                        *matRowDef="let row; columns: ['expanded_detail']"
                                        class="thing-config-detail-row"></tr>
                                </table>
                            </div>
                        </mat-card-content>
                    </mat-card>
                </div>

                <!-- actions card (a place for all the buttons that have not found a home yet) -->
                <mat-card class="card-gateway-actions">
                    <mat-card-header>
                        <div
                            mat-card-avatar
                            style="background-image: url('assets/inoa/satellite-color.png'); background-size: cover"></div>
                        <mat-card-title>Actions:</mat-card-title>
                        <mat-card-subtitle>chose wisely</mat-card-subtitle>
                    </mat-card-header>

                    <mat-card-content class="mat-card-content-gateway-actions"> </mat-card-content>

                    <mat-card-actions
                        class="card-actions"
                        align="end">
                        <!-- add button -->
                        <button
                            mat-raised-button
                            color="primary"
                            class="gateway-detail-action-button"
                            (click)="openCreateThingDialog()">
                            <mat-icon>add</mat-icon>
                            <span>Add thing</span>
                        </button>
                    </mat-card-actions>

                    <mat-card-actions
                        class="card-actions"
                        align="end">
                        <!-- change config button -->
                        <button
                            (click)="editConfigClick(intercomService.selectedGateway, $event)"
                            mat-raised-button
                            color="warn"
                            class="gateway-detail-action-button">
                            <mat-icon>edit</mat-icon>
                            <span>Change config</span>
                        </button>

                        <!-- restart button -->
                        <button
                            (click)="restartClick(intercomService.selectedGateway, $event)"
                            mat-raised-button
                            color="warn"
                            class="gateway-detail-action-button">
                            <mat-icon>restart_alt</mat-icon>
                            <span>Restart</span>
                        </button>
                    </mat-card-actions>
                </mat-card>
            </div>
        </div>
    </mat-tab>

    <mat-tab
        label="Satellite RPC Terminal"
        *ngIf="intercomService.selectedGateway">
        <div class="gateway-console-container">
            <ng-container *ngTemplateOutlet="gatewayTableMini"></ng-container>

            <mat-card class="cardConsole">
                <mat-card-header>
                    <div
                        mat-card-avatar
                        style="background-image: url('assets/inoa/satellite-color.png'); background-size: cover"></div>
                    <mat-card-title>RPC Command Editor for</mat-card-title>
                    <mat-card-subtitle>{{ intercomService.selectedGateway.name }} ({{ intercomService.selectedGateway.gateway_id }})</mat-card-subtitle>
                </mat-card-header>

                <mat-card-content class="mat-card-content-console">
                    <ngx-monaco-editor
                        class="monaco-editor"
                        [options]="monacoOptions"
                        [(ngModel)]="jsonCode">
                    </ngx-monaco-editor>
                </mat-card-content>

                <mat-card-actions
                    class="card-actions"
                    align="end">
                    <!-- send button -->
                    <button
                        mat-raised-button
                        color="warn"
                        class="console-action-button"
                        (click)="sendRPC()">
                        <mat-icon>upload</mat-icon>
                        <span>Send</span>
                    </button>
                </mat-card-actions>
            </mat-card>

            <gc-rpc-history-panel></gc-rpc-history-panel>
        </div>
    </mat-tab>
</mat-tab-group>
